## ------------------------------------------- ##
## Open-COBOL-ESQL-1.2 test suite: SQLCA test. ##
## ------------------------------------------- ##

sqlca: command line was:
  $ ./sqlca 

## --------- ##
## Platform. ##
## --------- ##

hostname = fv-az198-498
uname -m = x86_64
uname -r = 5.11.0-1028-azure
uname -s = Linux
uname -v = #31~20.04.2-Ubuntu SMP Tue Jan 18 08:46:15 UTC 2022

/usr/bin/uname -p = x86_64
/bin/uname -X     = unknown

/bin/arch              = x86_64
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = unknown
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: /home/linuxbrew/.linuxbrew/bin
PATH: /home/linuxbrew/.linuxbrew/sbin
PATH: /opt/pipx_bin
PATH: /home/runner/.cargo/bin
PATH: /usr/local/.ghcup/bin
PATH: /home/runner/.dotnet/tools
PATH: /snap/bin
PATH: /usr/local/sbin
PATH: /usr/local/bin
PATH: /usr/sbin
PATH: /usr/bin
PATH: /sbin
PATH: /bin
PATH: /usr/games
PATH: /usr/local/games

sqlca: atlocal:
| COBC="cobc -locesql"
| OCESQL=ocesql
| EMBED_DB_INFO="sh ../../embed_db_info.sh"
| COMPILE="${COBC} -I ../../"
| COMPILE_MODULE="${COMPILE} -m"
| RUN_MODULE="LD_PRELOAD=/usr/local/lib/libocesql.so cobcrun"
## ---------------- ##
## Tested programs. ##
## ---------------- ##

/sqlca.at:1: /usr/local/bin/ocesql --version
Open Cobol ESQL (Ocesql)
Version 1.2.0

April 19, 2019

Tokyo System House Co., Ltd. <opencobol@tsh-world.co.jp>

## ------------------ ##
## Running the tests. ##
## ------------------ ##
sqlca: starting at: Fri Mar  4 21:18:32 UTC 2022
sqlca: ending at: Fri Mar  4 21:18:32 UTC 2022
sqlca: test suite duration: 0h 0m 0s

## ------------- ##
## Test results. ##
## ------------- ##

ERROR: All 2 tests were run,
2 failed unexpectedly.

## ------------------------ ##
## Summary of the failures. ##
## ------------------------ ##
Failed tests:
Open-COBOL-ESQL-1.2 test suite: SQLCA test test groups:

 NUM: FILE-NAME:LINE     TEST-GROUP-NAME
      KEYWORDS

   1: connect-disconnect.at:1 connect-disconnect
   2: open-fetch-close.at:1 open-fetch-close

## ---------------------- ##
## Detailed failed tests. ##
## ---------------------- ##

#                             -*- compilation -*-
1. connect-disconnect.at:1: testing connect-disconnect ...
/connect-disconnect.at:76: ocesql prog.cbl prog.cob > /dev/null
/connect-disconnect.at:77: ${EMBED_DB_INFO} prog.cob
/connect-disconnect.at:78: ${COMPILE_MODULE} prog.cob
/connect-disconnect.at:79: ${RUN_MODULE} prog 2> /dev/null
--- -	2022-03-04 21:18:32.603068731 +0000
+++ /home/runner/work/Open-COBOL-ESQL/Open-COBOL-ESQL/Open-COBOL-ESQL/tests/sqlca.dir/at-groups/1/stdout	2022-03-04 21:18:32.599786329 +0000
@@ -1,11 +1 @@
--000000220
-08003
-+000000000
-00000
-+000000000
-00000
--000000402
-08001
--000000220
-08003
 
/connect-disconnect.at:79: exit code was 127, expected 1
1. connect-disconnect.at:1: 1. connect-disconnect (connect-disconnect.at:1): FAILED (connect-disconnect.at:79)

#                             -*- compilation -*-
2. open-fetch-close.at:1: testing open-fetch-close ...
/open-fetch-close.at:140: ocesql prog.cbl prog.cob > /dev/null
/open-fetch-close.at:141: ${EMBED_DB_INFO} prog.cob
/open-fetch-close.at:142: ${COMPILE_MODULE} prog.cob
/open-fetch-close.at:143: ${RUN_MODULE} prog 2> /dev/null
--- -	2022-03-04 21:18:32.720529053 +0000
+++ /home/runner/work/Open-COBOL-ESQL/Open-COBOL-ESQL/Open-COBOL-ESQL/tests/sqlca.dir/at-groups/2/stdout	2022-03-04 21:18:32.715793462 +0000
@@ -1,13 +1 @@
-+000000000
-00000
--000000602
-34000
-+000000000
-00000
--000000602
-34000
-+000000000
-00000
--000000602
-34000
 
/open-fetch-close.at:143: exit code was 127, expected 0
2. open-fetch-close.at:1: 2. open-fetch-close (open-fetch-close.at:1): FAILED (open-fetch-close.at:143)


