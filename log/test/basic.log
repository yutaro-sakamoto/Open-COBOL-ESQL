## ------------------------------------------- ##
## Open-COBOL-ESQL-1.2 test suite: basic test. ##
## ------------------------------------------- ##

basic: command line was:
  $ ./basic 

## --------- ##
## Platform. ##
## --------- ##

hostname = fv-az198-498
uname -m = x86_64
uname -r = 5.11.0-1028-azure
uname -s = Linux
uname -v = #31~20.04.2-Ubuntu SMP Tue Jan 18 08:46:15 UTC 2022

/usr/bin/uname -p = x86_64
/bin/uname -X     = unknown

/bin/arch              = x86_64
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = unknown
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: /home/linuxbrew/.linuxbrew/bin
PATH: /home/linuxbrew/.linuxbrew/sbin
PATH: /opt/pipx_bin
PATH: /home/runner/.cargo/bin
PATH: /usr/local/.ghcup/bin
PATH: /home/runner/.dotnet/tools
PATH: /snap/bin
PATH: /usr/local/sbin
PATH: /usr/local/bin
PATH: /usr/sbin
PATH: /usr/bin
PATH: /sbin
PATH: /bin
PATH: /usr/games
PATH: /usr/local/games

basic: atlocal:
| COBC="cobc -locesql"
| OCESQL=ocesql
| EMBED_DB_INFO="sh ../../embed_db_info.sh"
| COMPILE="${COBC} -I ../../"
| COMPILE_MODULE="${COMPILE} -m"
| RUN_MODULE="LD_PRELOAD=/usr/local/lib/libocesql.so cobcrun"
## ---------------- ##
## Tested programs. ##
## ---------------- ##

/basic.at:1: /usr/local/bin/ocesql --version
Open Cobol ESQL (Ocesql)
Version 1.2.0

April 19, 2019

Tokyo System House Co., Ltd. <opencobol@tsh-world.co.jp>

## ------------------ ##
## Running the tests. ##
## ------------------ ##
basic: starting at: Fri Mar  4 21:18:29 UTC 2022
basic: ending at: Fri Mar  4 21:18:31 UTC 2022
basic: test suite duration: 0h 0m 2s

## ------------- ##
## Test results. ##
## ------------- ##

ERROR: All 10 tests were run,
10 failed unexpectedly.

## ------------------------ ##
## Summary of the failures. ##
## ------------------------ ##
Failed tests:
Open-COBOL-ESQL-1.2 test suite: basic test test groups:

 NUM: FILE-NAME:LINE     TEST-GROUP-NAME
      KEYWORDS

   1: connect-disconnect.at:1 connect and disconnect statement test
   2: declare.at:1       declare statement test
   3: open-close.at:1    open and close statement test
   4: insert.at:1        insert statement test
   5: fetch.at:1         fetch statement test
   6: delete.at:1        delete statement test
   7: commit-rollback.at:1 commit and rollback statement test
   8: select.at:1        select statement test
   9: other-sql.at:1     other sql test
  10: update.at:1        update statement test

## ---------------------- ##
## Detailed failed tests. ##
## ---------------------- ##

#                             -*- compilation -*-
1. connect-disconnect.at:1: testing connect and disconnect statement test ...
/connect-disconnect.at:82: ocesql prog.cbl prog.cob > /dev/null
/connect-disconnect.at:83: ${EMBED_DB_INFO} prog.cob
/connect-disconnect.at:84: ${COMPILE_MODULE} prog.cob
/connect-disconnect.at:85: ${RUN_MODULE} prog 2> /dev/null
--- -	2022-03-04 21:18:30.014073648 +0000
+++ /home/runner/work/Open-COBOL-ESQL/Open-COBOL-ESQL/Open-COBOL-ESQL/tests/basic.dir/at-groups/1/stdout	2022-03-04 21:18:30.007626952 +0000
@@ -1,3 +1 @@
-<log> test case 0001: success
-<log> test case 0002: success
 
/connect-disconnect.at:85: exit code was 127, expected 0
1. connect-disconnect.at:1: 1. connect and disconnect statement test (connect-disconnect.at:1): FAILED (connect-disconnect.at:85)

#                             -*- compilation -*-
2. declare.at:1: testing declare statement test ...
/declare.at:136: ocesql prog.cbl prog.cob > /dev/null
/declare.at:137: ${EMBED_DB_INFO} prog.cob
/declare.at:138: ${COMPILE_MODULE} prog.cob
/declare.at:139: ${RUN_MODULE} prog 2> /dev/null
--- -	2022-03-04 21:18:30.130579311 +0000
+++ /home/runner/work/Open-COBOL-ESQL/Open-COBOL-ESQL/Open-COBOL-ESQL/tests/basic.dir/at-groups/2/stdout	2022-03-04 21:18:30.123634084 +0000
@@ -1,4 +1 @@
-<log> test case 0001: success
-<log> test case 0002: success
-<log> test case 0003: success
 
/declare.at:139: exit code was 127, expected 0
2. declare.at:1: 2. declare statement test (declare.at:1): FAILED (declare.at:139)

#                             -*- compilation -*-
3. open-close.at:1: testing open and close statement test ...
/open-close.at:133: ocesql prog.cbl prog.cob > /dev/null
/open-close.at:134: ${EMBED_DB_INFO} prog.cob
/open-close.at:135: ${COMPILE_MODULE} prog.cob
/open-close.at:136: ${RUN_MODULE} prog 2> /dev/null
--- -	2022-03-04 21:18:30.246329528 +0000
+++ /home/runner/work/Open-COBOL-ESQL/Open-COBOL-ESQL/Open-COBOL-ESQL/tests/basic.dir/at-groups/3/stdout	2022-03-04 21:18:30.239641217 +0000
@@ -1,3 +1 @@
-<log> test case 0001: success
-<log> test case 0002: success
 
/open-close.at:136: exit code was 127, expected 0
3. open-close.at:1: 3. open and close statement test (open-close.at:1): FAILED (open-close.at:136)

#                             -*- compilation -*-
4. insert.at:1: testing insert statement test ...
/insert.at:145: ocesql prog.cbl prog.cob > /dev/null
/insert.at:146: ${EMBED_DB_INFO} prog.cob
/insert.at:147: ${COMPILE_MODULE} prog.cob
/insert.at:148: ${RUN_MODULE} prog 2> /dev/null
--- -	2022-03-04 21:18:30.369445898 +0000
+++ /home/runner/work/Open-COBOL-ESQL/Open-COBOL-ESQL/Open-COBOL-ESQL/tests/basic.dir/at-groups/4/stdout	2022-03-04 21:18:30.363648841 +0000
@@ -1,11 +1 @@
-<log> test case 0001: success
-<log> test case 0002: success
-<log> test case 0003: success
-<log> test case 0004: success
-<log> test case 0005: success
-<log> test case 0006: success
-<log> test case 0007: success
-<log> test case 0008: success
-<log> test case 0009: success
-<log> test case 0010: success
 
/insert.at:148: exit code was 127, expected 0
4. insert.at:1: 4. insert statement test (insert.at:1): FAILED (insert.at:148)

#                             -*- compilation -*-
5. fetch.at:1: testing fetch statement test ...
/fetch.at:169: ocesql prog.cbl prog.cob > /dev/null
/fetch.at:170: ${EMBED_DB_INFO} prog.cob
/fetch.at:171: ${COMPILE_MODULE} prog.cob
/fetch.at:172: ${RUN_MODULE} prog 2> /dev/null
--- -	2022-03-04 21:18:30.502491578 +0000
+++ /home/runner/work/Open-COBOL-ESQL/Open-COBOL-ESQL/Open-COBOL-ESQL/tests/basic.dir/at-groups/5/stdout	2022-03-04 21:18:30.495656958 +0000
@@ -1,11 +1 @@
-+0001, 北海　太郎          , +0400
-+0002, 青森　次郎          , +0350
-+0003, 秋田　三郎          , +0300
-+0004, 岩手　四郎          , -0250
-+0005, 宮城　五郎          , -0200
-+0006, 福島　六郎          , +0150
-+0007, 栃木　七郎          , -0100
-+0008, 茨城　八郎          , +0050
-+0009, 群馬　九郎          , -0200
-+0010, 埼玉　十郎          , +0350
 
/fetch.at:172: exit code was 127, expected 0
5. fetch.at:1: 5. fetch statement test (fetch.at:1): FAILED (fetch.at:172)

#                             -*- compilation -*-
6. delete.at:1: testing delete statement test ...
/delete.at:182: ocesql prog.cbl prog.cob > /dev/null
/delete.at:183: ${EMBED_DB_INFO} prog.cob
/delete.at:184: ${COMPILE_MODULE} prog.cob
/delete.at:185: ${RUN_MODULE} prog 2> /dev/null
--- -	2022-03-04 21:18:30.635907581 +0000
+++ /home/runner/work/Open-COBOL-ESQL/Open-COBOL-ESQL/Open-COBOL-ESQL/tests/basic.dir/at-groups/6/stdout	2022-03-04 21:18:30.631665320 +0000
@@ -1,8 +1 @@
-0001 <log> success test_return_code
-0002 <log> success test_return_code
-0003 <log> success fetch_record +0001, 北海　太郎          , +0400
-0004 <log> success fetch_record +0002, 青森　次郎          , +0350
-0005 <log> success fetch_record +0003, 秋田　三郎          , +0300
-0006 <log> success fetch_record +0004, 岩手　四郎          , -0250
-0007 <log> success fetch_record +0005, 宮城　五郎          , -0200
 
/delete.at:185: exit code was 127, expected 0
6. delete.at:1: 6. delete statement test (delete.at:1): FAILED (delete.at:185)

#                             -*- compilation -*-
7. commit-rollback.at:1: testing commit and rollback statement test ...
/commit-rollback.at:192: ocesql prog.cbl prog.cob > /dev/null
/commit-rollback.at:193: ${EMBED_DB_INFO} prog.cob
/commit-rollback.at:194: ${COMPILE_MODULE} prog.cob
/commit-rollback.at:195: ${RUN_MODULE} prog 2> /dev/null
--- -	2022-03-04 21:18:30.770685168 +0000
+++ /home/runner/work/Open-COBOL-ESQL/Open-COBOL-ESQL/Open-COBOL-ESQL/tests/basic.dir/at-groups/7/stdout	2022-03-04 21:18:30.763673437 +0000
@@ -1,13 +1 @@
-0001 <log> success test_return_code
-0002 <log> success test_return_code
-0003 <log> success fetch_record +0001, 北海　太郎          , +0400
-0004 <log> success fetch_record +0002, 青森　次郎          , +0350
-0005 <log> success fetch_record +0003, 秋田　三郎          , +0300
-0006 <log> success fetch_record +0004, 岩手　四郎          , -0250
-0007 <log> success fetch_record +0005, 宮城　五郎          , -0200
-0008 <log> success fetch_record +0006, 福島　六郎          , +0150
-0009 <log> success fetch_record +0007, 栃木　七郎          , -0100
-0010 <log> success fetch_record +0008, 茨城　八郎          , +0050
-0011 <log> success fetch_record +0009, 群馬　九郎          , -0200
-0012 <log> success fetch_record +0010, 埼玉　十郎          , +0350
 
/commit-rollback.at:195: exit code was 127, expected 0
7. commit-rollback.at:1: 7. commit and rollback statement test (commit-rollback.at:1): FAILED (commit-rollback.at:195)

#                             -*- compilation -*-
8. select.at:1: testing select statement test ...
/select.at:174: ocesql prog.cbl prog.cob > /dev/null
/select.at:175: ${EMBED_DB_INFO} prog.cob
/select.at:176: ${COMPILE_MODULE} prog.cob
/select.at:177: ${RUN_MODULE} prog 2> /dev/null
--- -	2022-03-04 21:18:30.903190215 +0000
+++ /home/runner/work/Open-COBOL-ESQL/Open-COBOL-ESQL/Open-COBOL-ESQL/tests/basic.dir/at-groups/8/stdout	2022-03-04 21:18:30.899681799 +0000
@@ -1,8 +1 @@
-0001 <log> success test_return_code
-+0005, 宮城　五郎          , -0200
-+0006, 福島　六郎          , +0150
-+0007, 栃木　七郎          , -0100
-+0008, 茨城　八郎          , +0050
-+0009, 群馬　九郎          , -0200
-+0010, 埼玉　十郎          , +0350
 
/select.at:177: exit code was 127, expected 0
8. select.at:1: 8. select statement test (select.at:1): FAILED (select.at:177)

#                             -*- compilation -*-
9. other-sql.at:1: testing other sql test ...
/other-sql.at:120: ocesql prog.cbl prog.cob > /dev/null
/other-sql.at:121: sh ../../embed_db_info.sh prog.cob
/other-sql.at:122: cobc -locesql -I ../../ prog.cob
/other-sql.at:123: cobcrun prog 2> /dev/null
--- -	2022-03-04 21:18:31.020207309 +0000
+++ /home/runner/work/Open-COBOL-ESQL/Open-COBOL-ESQL/Open-COBOL-ESQL/tests/basic.dir/at-groups/9/stdout	2022-03-04 21:18:31.015688932 +0000
@@ -1,4 +1 @@
-0001 <log> success test_return_code
-0002 <log> success test_return_code
-0003 <log> success test_return_code
 
/other-sql.at:123: exit code was 1, expected 0
9. other-sql.at:1: 9. other sql test (other-sql.at:1): FAILED (other-sql.at:123)

#                             -*- compilation -*-
10. update.at:1: testing update statement test ...
/update.at:181: ocesql prog.cbl prog.cob > /dev/null
/update.at:182: ${EMBED_DB_INFO} prog.cob
/update.at:183: ${COMPILE_MODULE} prog.cob
/update.at:184: ${RUN_MODULE} prog 2> /dev/null
--- -	2022-03-04 21:18:31.154311155 +0000
+++ /home/runner/work/Open-COBOL-ESQL/Open-COBOL-ESQL/Open-COBOL-ESQL/tests/basic.dir/at-groups/10/stdout	2022-03-04 21:18:31.147697048 +0000
@@ -1,12 +1 @@
-0001 <log> success test_return_code
-0002 <log> success fetch_record +0001, 北海　太郎          , +0400
-0003 <log> success fetch_record +0002, 青森　次郎          , +0350
-0004 <log> success fetch_record +0003, 秋田　三郎          , +0300
-0005 <log> success fetch_record +0004, 岩手　四郎          , -0250
-0006 <log> success fetch_record +0005, 宮城　五郎          , -0200
-0007 <log> success fetch_record +0006, NO_NAME             , +0150
-0008 <log> success fetch_record +0007, NO_NAME             , -0100
-0009 <log> success fetch_record +0008, NO_NAME             , +0050
-0010 <log> success fetch_record +0009, NO_NAME             , -0200
-0011 <log> success fetch_record +0010, NO_NAME             , +0350
 
/update.at:184: exit code was 127, expected 0
10. update.at:1: 10. update statement test (update.at:1): FAILED (update.at:184)


